<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quizterra | Inventory</title>
<link href="https://fonts.googleapis.com/css2?family=Titan+One&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Titan One', cursive;
    background: #f0f4f8;
    margin: 0;
    padding: 0;
}
header {
    background: #4a90e2;
    padding: 20px;
    text-align: center;
    font-size: 2rem;
    color: white;
}
.user-info {
    text-align: center;
    margin: 15px;
    font-size: 1.2rem;
}
.inventory-container {
    display: flex;
    flex-wrap: wrap;
    padding: 20px;
    justify-content: center;
    gap: 15px;
}
.card {
    background: #fff;
    border-radius: 12px;
    padding: 15px;
    width: 180px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.card img {
    width: 80px;
    height: 80px;
}
.card button {
    margin-top: 8px;
    padding: 5px 10px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}
.sell-btn {
    background: #ff6b6b;
    color: white;
}
.profile-btn {
    background: #4ecdc4;
    color: white;
    margin-left: 5px;
}
</style>
</head>
<body>

<header>Quizterra Inventory</header>

<div class="user-info">
Logged in as: <span id="usernameDisplay">Guest</span> | Tokens: <span id="tokenDisplay">0</span>
</div>

<div class="inventory-container" id="inventoryContainer">
<!-- Cards appear here -->
</div>

<script>
// --- Persistent login ---
let currentUser = localStorage.getItem('quizterraCurrentUser');
let quizterraStorage = JSON.parse(localStorage.getItem('quizterraStorage') || '{}');

if (!currentUser) {
    document.getElementById('usernameDisplay').textContent = "Guest";
    document.getElementById('tokenDisplay').textContent = "0";
    alert("No user logged in. Log in to see your inventory.");
} else {
    document.getElementById('usernameDisplay').textContent = currentUser;

    let userData = quizterraStorage[currentUser] || { tokens: 0, inventory: [] };
    document.getElementById('tokenDisplay').textContent = userData.tokens;

    const container = document.getElementById('inventoryContainer');
    if (userData.inventory.length === 0) {
        container.innerHTML = "<p>Your inventory is empty!</p>";
    } else {
        userData.inventory.forEach((item, index) => {
            let card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${item.image}" alt="${item.name}">
                <h3>${item.name}</h3>
                <p>Rarity: ${item.rarity}</p>
                <p>Quantity: ${item.amount || 1}</p>
                <div>
                    <button class="sell-btn">Sell</button>
                    <button class="profile-btn">Set Profile</button>
                </div>
            `;

            // Sell button
            card.querySelector('.sell-btn').addEventListener('click', () => {
                let amount = item.amount || 1;
                let sellPrice = 10 * amount; // Example: 10 tokens per card
                userData.tokens += sellPrice;

                // Remove card from inventory
                userData.inventory.splice(index, 1);
                quizterraStorage[currentUser] = userData;
                localStorage.setItem('quizterraStorage', JSON.stringify(quizterraStorage));
                alert(`Sold ${item.name} for ${sellPrice} tokens!`);
                location.reload();
            });

            // Set profile button
            card.querySelector('.profile-btn').addEventListener('click', () => {
                userData.profileCard = item;
                quizterraStorage[currentUser] = userData;
                localStorage.setItem('quizterraStorage', JSON.stringify(quizterraStorage));
                alert(`${item.name} set as your profile card!`);
            });

            container.appendChild(card);
        });
    }
}

// Optional: login/logout for testing
function login(username) {
    localStorage.setItem('quizterraCurrentUser', username);
    location.reload();
}

function logout() {
    localStorage.removeItem('quizterraCurrentUser');
    location.reload();
}
</script>

</body>
</html>
