<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Foodit | Inventory</title>
<link href="https://fonts.googleapis.com/css2?family=Titan+One&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Titan One', cursive;
        background: #fef6e4;
        margin: 0;
        padding: 0;
    }
    header {
        background: #ffb347;
        padding: 20px;
        text-align: center;
        font-size: 2rem;
        color: white;
    }
    .inventory-container {
        display: flex;
        flex-wrap: wrap;
        padding: 20px;
        justify-content: center;
        gap: 15px;
    }
    .blook-card {
        background: #fff3e6;
        border-radius: 12px;
        padding: 15px;
        width: 150px;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .blook-card img {
        width: 80px;
        height: 80px;
    }
    .user-info {
        text-align: center;
        margin: 15px;
        font-size: 1.2rem;
    }
    .tokens {
        color: #ff7f50;
        font-weight: bold;
    }
</style>
</head>
<body>
<header>Foodit Inventory</header>

<div class="user-info">
    Logged in as: <span id="usernameDisplay">Guest</span> | Tokens: <span id="tokenDisplay">0</span>
</div>

<div class="inventory-container" id="inventoryContainer">
    <!-- User items will appear here -->
</div>

<script>
// --- Persistent login ---
let currentUser = localStorage.getItem('fooditCurrentUser');
let fooditStorage = JSON.parse(localStorage.getItem('fooditStorage') || '{}');

// If no user, show guest
if (!currentUser) {
    document.getElementById('usernameDisplay').textContent = "Guest";
    document.getElementById('tokenDisplay').textContent = "0";
    alert("No user logged in. You can log in to see your inventory.");
} else {
    document.getElementById('usernameDisplay').textContent = currentUser;

    // Load user data
    let userData = fooditStorage[currentUser] || { tokens: 0, inventory: [] };
    document.getElementById('tokenDisplay').textContent = userData.tokens;

    // Show inventory
    const container = document.getElementById('inventoryContainer');
    if (userData.inventory.length === 0) {
        container.innerHTML = "<p>Your inventory is empty!</p>";
    } else {
        userData.inventory.forEach(item => {
            let card = document.createElement('div');
            card.className = 'blook-card';
            card.innerHTML = `
                <img src="${item.image}" alt="${item.name}">
                <h3>${item.name}</h3>
                <p>Rarity: ${item.rarity}</p>
                <p>Quantity: ${item.amount || 1}</p>
            `;
            container.appendChild(card);
        });
    }
}

// Optional: login/logout functions for testing
function login(username) {
    localStorage.setItem('fooditCurrentUser', username);
    location.reload(); // reload to show inventory
}

function logout() {
    localStorage.removeItem('fooditCurrentUser');
    location.reload();
}
</script>

</body>
</html>
